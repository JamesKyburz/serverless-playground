service: s3-stack

frameworkVersion: ^2.15

package:
  individually: true

plugins:
  - serverless-offline
  - serverless-s3-local

provider:
  name: aws
  runtime: nodejs12.x
  deploymentBucket:
    blockPublicAccess: true
    serverSideEncryption: AES256
  logRetentionInDays: 5

custom:
  s3:
    host: localhost

functions:
  document:
    timeout: 6
    memorySize: 128
    handler: index.s3
    events:
      - s3:
          bucket: 'document'
          event: s3:ObjectCreated:*
          existing: true
      - s3:
          bucket: 'document'
          event: s3:ObjectRemoved:*
          existing: true

resources:
  Resources:
    Document:
      Type: AWS::S3::Bucket
      Properties:
        BucketName: 'document'
